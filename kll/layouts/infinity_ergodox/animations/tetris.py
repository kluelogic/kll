#!/usr/bin/env python3
#
# tetris.py
#

# Pixel Position:
#
# P[ 7] P[ 6] P[ 5] P[ 4] P[ 3] P[ 2] P[ 1]
# P[14] P[13] P[12] P[11] P[10] P[ 9] P[ 8]
# P[20] P[19] P[18] P[17] P[16] P[15]
# P[29] P[28] P[27] P[26] P[25] P[24] P[23]
# P[38] P[37] P[36] P[35] P[34]             P[22] P[21]
#                                                 P[30]
#                                     P[33] P[32] P[31]

# Tetromino:
#
# OOOO  O     O     O  OOO  OOO  OOO  O    O  OO  OO  O    O  O    O  OO    OO  OO  O
#       OOO  OOO  OOO  O     O     O  O    O  O    O  OO  OO  OO  OO   OO  OO   OO  O
#                                     OO  OO  O    O  O    O   O  O                 O
#                                                                                   O

# board = [  6, 5, 4, 3, 2,
#           13,12,11,10, 9,
#           19,18,17,16,15,
#           28,27,26,25,24,
#           37,36,35,34 ]

board = [  7, 6, 5, 4, 3,
          14,13,12,11,10,
          20,19,18,17,16,
          29,28,27,26,25,
          38,37,36,35,34 ]

# 0: free, 1: occupied, 2: highlight

tetris = []
tetris.append( [ 0,0,0,0,0,
                 0,0,0,0,0,
                 0,0,0,0,0,
                 0,0,0,0,0,
                 0,0,0,0,0 ] ) # initial

tetris.append( [ 0,0,1,0,0, #  O
                 0,1,1,1,0, # OOO
                 0,0,0,0,0,
                 0,0,0,0,0,
                 0,0,0,0,0 ] )

tetris.append( [ 0,0,0,0,0,
                 0,0,1,0,0,
                 0,1,1,1,0,
                 0,0,0,0,0,
                 0,0,0,0,0 ] )

tetris.append( [ 0,0,0,0,0,
                 0,0,0,0,0,
                 0,0,1,0,0,
                 0,1,1,1,0,
                 0,0,0,0,0 ] )

tetris.append( [ 0,0,0,0,0,
                 0,0,0,0,0,
                 0,0,0,0,0,
                 0,0,1,0,0,
                 0,1,1,1,0 ] )

tetris.append( [ 1,0,0,0,0, # O
                 1,1,0,0,0, # OO
                 1,0,0,0,0, # O
                 0,0,1,0,0,
                 0,1,1,1,0 ] )

tetris.append( [ 0,0,0,0,0,
                 1,0,0,0,0, 
                 1,1,0,0,0,
                 1,0,1,0,0,
                 0,1,1,1,0 ] )

tetris.append( [ 0,0,0,0,0,
                 0,0,0,0,0, 
                 1,0,0,0,0,
                 1,1,1,0,0,
                 1,1,1,1,0 ] )

tetris.append( [ 0,0,0,1,0, # O
                 0,0,0,1,1, # OO
                 1,0,0,0,1, #  O
                 1,1,1,0,0,
                 1,1,1,1,0 ] )

tetris.append( [ 0,0,0,0,0,
                 0,0,0,1,0,
                 1,0,0,1,1,
                 1,1,1,0,1,
                 1,1,1,1,0 ] )

tetris.append( [ 0,0,0,0,0,
                 0,0,0,0,0,
                 1,0,0,1,0,
                 1,1,1,1,1,
                 1,1,1,1,1 ] )

tetris.append( [ 0,0,0,0,0,
                 0,0,0,0,0,
                 1,0,0,1,0,
                 2,2,2,2,2,
                 2,2,2,2,2 ] )

tetris.append( [ 0,0,0,0,0,
                 0,0,0,0,0,
                 0,0,0,0,0,
                 0,0,0,0,0,
                 1,0,0,1,0 ] )

tetris.append( [ 0,0,1,1,0, #  OO
                 0,1,1,0,0, # OO
                 0,0,0,0,0,
                 0,0,0,0,0,
                 1,0,0,1,0 ] )

tetris.append( [ 0,0,0,0,0,
                 0,0,1,1,0,
                 0,1,1,0,0,
                 0,0,0,0,0,
                 1,0,0,1,0 ] )

tetris.append( [ 0,0,0,0,0,
                 0,0,0,0,0,
                 0,0,1,1,0,
                 0,1,1,0,0,
                 1,0,0,1,0 ] )

tetris.append( [ 0,0,0,0,0,
                 0,0,0,0,0,
                 0,0,0,0,0,
                 0,0,1,1,0,
                 1,1,1,1,0 ] )

tetris.append( [ 1,1,0,0,0, # OO
                 1,1,0,0,0, # OO
                 0,0,0,0,0,
                 0,0,1,1,0,
                 1,1,1,1,0 ] )

tetris.append( [ 0,0,0,0,0,
                 1,1,0,0,0,
                 1,1,0,0,0,
                 0,0,1,1,0,
                 1,1,1,1,0 ] )

tetris.append( [ 0,0,0,0,0,
                 0,0,0,0,0,
                 1,1,0,0,0,
                 1,1,1,1,0,
                 1,1,1,1,0 ] )

tetris.append( [ 1,1,1,0,0, # OOO
                 0,0,1,0,0, #   O
                 1,1,0,0,0,
                 1,1,1,1,0,
                 1,1,1,1,0 ] )

tetris.append( [ 0,0,0,0,0,
                 1,1,1,0,0,
                 1,1,1,0,0,
                 1,1,1,1,0,
                 1,1,1,1,0 ] )

tetris.append( [ 0,0,0,1,1, # OO
                 1,1,1,0,1, #  O
                 1,1,1,0,1, #  O
                 1,1,1,1,0,
                 1,1,1,1,0 ] )

tetris.append( [ 0,0,0,0,0,
                 1,1,1,1,1,
                 1,1,1,0,1,
                 1,1,1,1,1,
                 1,1,1,1,0 ] )

tetris.append( [ 0,0,0,0,0,
                 1,1,1,0,0,
                 1,1,1,1,1,
                 1,1,1,1,1,
                 1,1,1,1,1 ] )

tetris.append( [ 0,0,0,0,0,
                 1,1,1,0,0,
                 2,2,2,2,2,
                 2,2,2,2,2,
                 2,2,2,2,2 ] )

tetris.append( [ 0,0,0,0,0,
                 0,0,0,0,0,
                 0,0,0,0,0,
                 0,0,0,0,0,
                 1,1,1,0,0 ] )

tetris.append( [ 0,0,0,0,1, #  O
                 0,0,0,0,1, #  O
                 0,0,0,1,1, # OO
                 0,0,0,0,0,
                 1,1,1,0,0 ] )

tetris.append( [ 0,0,0,0,0,
                 0,0,0,0,1,
                 0,0,0,0,1,
                 0,0,0,1,1,
                 1,1,1,0,0 ] )

tetris.append( [ 0,0,0,0,0,
                 0,0,0,0,0,
                 0,0,0,0,1,
                 0,0,0,0,1,
                 1,1,1,1,1 ] )

tetris.append( [ 0,0,0,0,0,
                 0,0,0,0,0,
                 0,0,0,0,1,
                 0,0,0,0,1,
                 2,2,2,2,2 ] )

tetris.append( [ 0,0,0,0,0,
                 0,0,0,0,0,
                 0,0,0,0,0,
                 0,0,0,0,1,
                 0,0,0,0,1 ] )

tetris.append( [ 0,0,0,1,0, #   O
                 0,1,1,1,0, # OOO
                 0,0,0,0,0,
                 0,0,0,0,1,
                 0,0,0,0,1 ] )

tetris.append( [ 0,0,0,0,0,
                 0,0,0,1,0,
                 0,1,1,1,0,
                 0,0,0,0,1,
                 0,0,0,0,1 ] )

tetris.append( [ 0,0,0,0,0,
                 0,0,0,0,0,
                 0,0,0,1,0,
                 0,1,1,1,1,
                 0,0,0,0,1 ] )

tetris.append( [ 0,0,0,0,0,
                 0,0,0,0,0,
                 0,0,0,0,0,
                 0,0,0,1,1,
                 0,1,1,1,1 ] )

tetris.append( [ 1,1,1,0,0, # OOO
                 1,0,0,0,0, # O
                 0,0,0,0,0,
                 0,0,0,1,1,
                 0,1,1,1,1 ] )

tetris.append( [ 0,0,0,0,0,
                 1,1,1,0,0,
                 1,0,0,0,0,
                 0,0,0,1,1,
                 0,1,1,1,1 ] )

tetris.append( [ 0,0,0,0,0,
                 0,0,0,0,0,
                 1,1,1,0,0,
                 1,0,0,1,1,
                 0,1,1,1,1 ] )

tetris.append( [ 0,0,0,0,0,
                 0,0,0,0,0,
                 0,0,0,0,0,
                 1,1,1,1,1,
                 1,1,1,1,1 ] )

tetris.append( [ 0,0,0,0,0,
                 0,0,0,0,0,
                 0,0,0,0,0,
                 2,2,2,2,2,
                 2,2,2,2,2 ] )

tetris.append( [ 0,0,0,0,0,
                 0,0,0,0,0,
                 0,0,0,0,0,
                 0,0,0,0,0,
                 0,0,0,0,0 ] )

tetris.append( [ 0,1,0,0,0, # O
                 0,1,0,0,0, # O
                 0,1,1,0,0, # OO
                 0,0,0,0,0,
                 0,0,0,0,0 ] )

tetris.append( [ 0,0,0,0,0,
                 0,1,0,0,0,
                 0,1,0,0,0,
                 0,1,1,0,0,
                 0,0,0,0,0 ] )

tetris.append( [ 0,0,0,0,0,
                 0,0,0,0,0,
                 0,1,0,0,0,
                 0,1,0,0,0,
                 0,1,1,0,0 ] )

tetris.append( [ 0,0,1,1,0, # OO
                 0,0,0,1,1, #  OO
                 0,1,0,0,0,
                 0,1,0,0,0,
                 0,1,1,0,0 ] )

tetris.append( [ 0,0,0,0,0,
                 0,0,1,1,0,
                 0,1,0,1,1,
                 0,1,0,0,0,
                 0,1,1,0,0 ] )

tetris.append( [ 0,0,0,0,0,
                 0,0,0,0,0,
                 0,1,1,1,0,
                 0,1,0,1,1,
                 0,1,1,0,0 ] )

tetris.append( [ 0,0,0,0,0,
                 0,0,0,0,0,
                 0,1,0,0,0,
                 0,1,1,1,0,
                 0,1,1,1,1 ] )

tetris.append( [ 0,0,0,0,1, #  O
                 0,0,0,1,1, # OO
                 0,1,0,0,1, #  O
                 0,1,1,1,0,
                 0,1,1,1,1 ] )

tetris.append( [ 0,0,0,0,0,
                 0,0,0,0,1,
                 0,1,0,1,1,
                 0,1,1,1,1,
                 0,1,1,1,1 ] )

tetris.append( [ 0,1,1,1,0, # OOO
                 0,0,1,0,1, #  O
                 0,1,0,1,1,
                 0,1,1,1,1,
                 0,1,1,1,1 ] )

tetris.append( [ 0,0,0,0,0,
                 0,1,1,1,1,
                 0,1,1,1,1,
                 0,1,1,1,1,
                 0,1,1,1,1 ] )

tetris.append( [ 1,0,0,0,0, # O
                 1,1,1,1,1, # O
                 1,1,1,1,1, # O
                 1,1,1,1,1, # O
                 0,1,1,1,1 ] )

tetris.append( [ 0,0,0,0,0,
                 1,1,1,1,1,
                 1,1,1,1,1,
                 1,1,1,1,1,
                 1,1,1,1,1 ] )

tetris.append( [ 0,0,0,0,0,
                 2,2,2,2,2,
                 2,2,2,2,2,
                 2,2,2,2,2,
                 2,2,2,2,2 ] )

tetris.append( [ 0,0,0,0,0,
                 0,0,0,0,0,
                 0,0,0,0,0,
                 0,0,0,0,0,
                 0,0,0,0,0 ] )

def print_tetris():
    for frame, tet in enumerate( tetris ):
        if frame == 0:
            print( 'A[tetris, 1] <= P[r:0](0),P[r:1](0),P[r:2](0),P[r:3](0),P[r:4](0),P[r:5](0),P[r:6](0);' )
            continue
        changes = []
        for i, t in enumerate( tet ):
            if tetris[frame][i] != tetris[frame-1][i]:
                if   tetris[frame][i] == 1: val = 106
                elif tetris[frame][i] == 2: val = 255
                else:                       val = 0
                changes.append( ( board[i], val ) )
        pixels = ','.join( [ 'P[{}]({})'.format( change[0], change[1] ) for change in changes ] )
        print( 'A[tetris, {}] <= {};'.format( frame + 1, pixels ) )

# main

print_tetris()
